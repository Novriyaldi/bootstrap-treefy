+function(a){"use strict";function b(b){arguments;return this.each(function(){var c=a(this),d=c.data("treeFy");if(!d){var f=a.extend(!0,{},a.fn.treeFy.defaults,"object"==typeof b&&b);c.data("treeFy",d=new e(this,f))}"string"==typeof b&&d[b].call(c)})}var c=function(b,d){var e=b.find("td").get(d);return 0!=a(e).find(":checkbox").length?(d++,c(b,d)):e},d=function(a){var b=/treetable-([A-Za-z0-9_-]+)/,c=/treetable-parent-([A-Za-z0-9_-]+)/;this.row=a,this.id=null,b.test(this.row.attr("data-node"))&&(this.id=b.exec(this.row.attr("data-node"))[1]),this.parentId=null,c.test(this.row.attr("data-pnode"))&&(this.parentId=c.exec(this.row.attr("data-pnode"))[1]),this.children=[],this.status=!0};d.prototype.addChildren=function(b){var c=this,e="treetable-parent-"+c.id,f=b.find('[data-pnode="'+e+'"]');0!=f.length&&a.each(f,function(e,f){var g=new d(a(f));c.children.push(g),g.addChildren(b)})},d.prototype.initIndent=function(b){this.row.find(".treetable-indent").remove();for(var c=this.row.find(".treetable-expander"),d=this.getDepth(b.$table),e=0;d>e;e++){var f=b.options.indentTemplate;a(f).insertBefore(c)}},d.prototype.initExpander=function(b){var d=this,e=c(d.row,b.options.treeColumn),f=d.row.find(".treetable-expander");f&&f.remove();var g=b.options.expanderTemplate;a(g).prependTo(e).click(function(){d.toggle()})},d.prototype.renderExpand=function(a){var b=this.row.find(".treetable-expander");b?this.row.hasClass("treetable-collapsed")?(b.removeClass(a.options.expanderExpandedClass),b.addClass(a.options.expanderCollapsedClass)):(b.removeClass(a.options.expanderCollapsedClass),b.addClass(a.options.expanderExpandedClass)):(this.initExpander(a),this.renderExpand(a))},d.prototype.toggle=function(){this.row.hasClass("treetable-expanded")?this.isLeaf()||this.row.hasClass("treetable-collapsed")||(this.row.removeClass("treetable-expanded"),this.row.addClass("treetable-collapsed")):this.isLeaf()||this.row.hasClass("treetable-expanded")||(this.row.removeClass("treetable-collapsed"),this.row.addClass("treetable-expanded"))},d.prototype.isLeaf=function(){return 0===this.children.length},d.prototype.isCollapsed=function(a){var b=0===this.getDepth(a);return b?!1:this.getParentNode(a).row.hasClass("treetable-collapsed")?!0:this.getParentNode(a).isCollapsed(a)},d.prototype.getDepth=function(a){return null===this.getParentNode(a)?0:this.getParentNode(a).getDepth(a)+1},d.prototype.getParentNode=function(a){return null===this.parentId?null:this.getNodeById(this.parentId,a)},d.prototype.getNodeById=function(a,b){var c="treetable-"+a,e=b.find('[data-node="'+c+'"]'),f=new d(e);return f.addChildren(b),f};var e=function(b,c){this.options=c,this.$table=a(b);var d=this.getAllNodes();this.initTree(d)};e.VERSION="0.0.1",e.prototype.getAllNodes=function(){var b=this,c=a.grep(b.$table.find("tr"),function(b){var c=a(b).attr("data-node"),d=/treetable-([A-Za-z0-9_-]+)/;return d.test(c)}),e=a(c),f=[];return a.each(e,function(){var c=new d(a(this));c.addChildren(b.$table),f.push(c)}),f},e.prototype.initTree=function(b){var c=this,d=[];a.each(b,function(){var a=0===this.children.length;a||this.row.addClass(c.options.initStatusClass),this.parentId||d.push(this)}),c.initNode(d),c.render(d)},e.prototype.initNode=function(b){var c=this;a.each(b,function(){c.initNode(this.children),this.initExpander(c),this.initIndent(c);var a=this.row,b=[];b.push(this),a.find(".treetable-expander").on("click",function(a){a.stopPropagation(),c.render(b)})})},e.prototype.render=function(b){var c=this;a.each(b,function(){this.isCollapsed(c.$table)?this.row.hide():this.row.show(),this.isLeaf()||(this.renderExpand(c),c.render(this.children))})};var f=a.fn.treeFy;a.fn.treeFy=b,a.fn.treeFy.Constructor=e,a.fn.treeFy.defaults={expanderTemplate:'<span class="treetable-expander"></span>',indentTemplate:'<span class="treetable-indent"></span>',expanderExpandedClass:"fa fa-angle-down",expanderCollapsedClass:"fa fa-angle-right",treeColumn:0,initStatusClass:"treetable-expanded"},a.fn.treeFy.noConflict=function(){return a.fn.treeFy=f,this}}(jQuery);